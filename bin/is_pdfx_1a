#!/usr/bin/env ruby

begin
  require 'pdf/preflight'
rescue LoadError
  $LOAD_PATH.unshift File.dirname(__FILE__) + "/../lib/" 
  require 'pdf/preflight'
end


filename  = ARGV.shift
preflight = PDF::Preflight::PDFX1A.new
messages  = preflight.check(filename)

messages.each do |msg|
  $stderr.puts msg
end

exit messages.size
