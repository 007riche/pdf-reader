#!/usr/bin/env ruby1.9

$LOAD_PATH.unshift(File.dirname(__FILE__) + "/../lib")

require 'pdf/reader'

receiver = PDF::Reader::RegisterReceiver.new

if ARGV.empty?
  PDF::Reader.new.parse($stdin, receiver)
else
  PDF::Reader.file(ARGV[0], receiver)
end

receiver.callbacks.each do |callback|
  puts "#{callback[:name]} - #{callback[:args].inspect}"
end
